{% extends "base.html" %}
{% block title %}–ü—Ä–æ–¥–∞–∂–∏ ‚Äî GALAXY FOOD{% endblock %}
{% block content %}

<div class="flex-between">
  <h1>üßæ –ü—Ä–æ–¥–∞–∂–∏</h1>
  <button class="btn btn-gold" onclick="openModal('modal-add-sale')">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É</button>
</div>

<!-- –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ -->
<form method="GET" class="form-box" style="padding:16px 20px;">
  <div class="form-row" style="margin-bottom:0; align-items:flex-end;">
    <div class="form-group">
      <label>–° –¥–∞—Ç—ã</label>
      <input type="date" name="start" value="{{ start }}">
    </div>
    <div class="form-group">
      <label>–ü–æ –¥–∞—Ç—É</label>
      <input type="date" name="end" value="{{ end }}">
    </div>
    <div>
      <button class="btn btn-brown" type="submit">–ü–æ–∫–∞–∑–∞—Ç—å</button>
    </div>
  </div>
</form>

{% if sales %}
<div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>–î–∞—Ç–∞</th>
        <th>–ë–ª—é–¥–æ</th>
        <th>–ö–æ–ª-–≤–æ</th>
        <th class="text-right">–°—É–º–º–∞</th>
      </tr>
    </thead>
    <tbody>
      {% for s in sales %}
      <tr>
        <td>{{ s.date }}</td>
        <td>{{ s.dish_name }}</td>
        <td>{{ s.quantity }}</td>
        <td class="text-right text-gold">{{ "%.0f"|format(s.total_amount) }} GEL</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div style="text-align:right; font-size:18px; font-weight:800; color:var(--brown); padding-right:8px;">
  –ò—Ç–æ–≥–æ: <span class="text-gold">{{ "%.0f"|format(total) }} GEL</span>
</div>
{% else %}
<div class="form-box" style="text-align:center; padding:40px;">
  <div style="font-size:48px;">üßæ</div>
  <p style="color:#888; font-size:16px; margin-top:12px;">–ü—Ä–æ–¥–∞–∂ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –Ω–µ—Ç.</p>
</div>
{% endif %}

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É -->
<div class="modal-bg" id="modal-add-sale">
  <div class="modal">
    <span class="modal-close" onclick="closeModal('modal-add-sale')">‚úï</span>
    <h2>–ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</h2>
    <form method="POST" action="{{ url_for('add_sale') }}">
      <div class="form-group" style="margin-bottom:14px;">
        <label>–ë–ª—é–¥–æ *</label>
        <select name="dish_id" required>
          <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–æ ‚Äî</option>
          {% for d in dishes %}
          <option value="{{ d.id }}">{{ d.name }} ‚Äî {{ "%.0f"|format(d.price) }} GEL</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group" style="margin-bottom:14px;">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π *</label>
        <input type="number" name="quantity" value="1" min="1" required>
      </div>
      <div class="form-group" style="margin-bottom:20px;">
        <label>–î–∞—Ç–∞</label>
        <input type="date" name="date" value="{{ start }}">
      </div>
      <button class="btn btn-gold btn-block" type="submit">–ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É</button>
    </form>
  </div>
</div>

{% endblock %}
